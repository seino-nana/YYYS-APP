import{y as e,p as a,o as l,c as s,w as t,e as c,z as o,l as i,g as u,b as r,j as f,F as n,k as d,f as m,O as _,r as v,S as p,t as k,s as y}from"./index-c10f9bc5.js";import{_ as h}from"./uni-icons.86887c9d.js";import{o as g,r as C}from"./uni-app.es.7b888dc1.js";import{_ as S}from"./u-image.0192172e.js";import{h as j,m as x}from"./data.700934dc.js";import{u as b}from"./member.156f20f2.js";import{_ as w}from"./_plugin-vue_export-helper.1b428a4d.js";const z=w({__name:"history",setup(w){const{safeAreaInsets:z}=e(),I=b(),E=a([]);a(!1);const P=a(!1),A=a(!1);g((async()=>{const e=await j();E.value=e,E.value.forEach((e=>{e.isSelected=!1}))}));const D=e=>{y({url:"/pages/playPage/playPage?id="+e})},F=()=>{_({delta:1})},L=()=>{P.value=!P.value},O=()=>{A.value=!A.value,1==A.value?E.value.forEach((e=>{e.isSelected=!0})):E.value.forEach((e=>{e.isSelected=!1}))},T=()=>{const e=E.value.filter((e=>!0===e.isSelected)).map((e=>e.movieId));x(e).then((e=>{j().then((e=>{E.value=e,P.value=!1,A.value=!1,E.value.forEach((e=>{e.isSelected=!1}))}))}))};return(e,a)=>{var _;const y=C(v("uni-icons"),h),g=i,j=C(v("u-image"),S),x=p;return l(),s(g,{class:"history",style:c({paddingTop:(null==(_=o(z))?void 0:_.top)+"px"})},{default:t((()=>[u(g,{class:"navbar"},{default:t((()=>[u(g,{class:"return",onClick:F},{default:t((()=>[u(y,{type:"arrow-left",size:"28",color:"#9e9e9e"})])),_:1}),u(g,{class:"title"},{default:t((()=>[r("历史记录")])),_:1}),u(g,{class:"edit",onClick:L},{default:t((()=>[P.value?(l(),s(g,{key:0},{default:t((()=>[r("取消")])),_:1})):(l(),s(g,{key:1},{default:t((()=>[r("编辑")])),_:1}))])),_:1})])),_:1}),u(x,{"scroll-y":"",class:"scroll-view"},{default:t((()=>[o(I).profile?(l(),f(n,{key:0},[E.value.length?(l(),s(g,{key:0,class:"movie-list"},{default:t((()=>[(l(!0),f(n,null,d(E.value,((e,a)=>(l(),s(g,{class:"movie-list-item"},{default:t((()=>[P.value?(l(),s(g,{key:0,class:"check",onClick:e=>(e=>{E.value[e].isSelected=!E.value[e].isSelected})(a)},{default:t((()=>[e.isSelected?(l(),s(g,{key:0,class:"check-icon-active"},{default:t((()=>[u(y,{type:"checkmarkempty",color:"#fff"})])),_:1})):(l(),s(g,{key:1,class:"check-icon"}))])),_:2},1032,["onClick"])):m("",!0),u(j,{width:"220rpx",height:"280rpx",src:e.image_thumb,"lazy-load":!0,onClick:a=>D(e.movieId)},null,8,["src","onClick"]),u(g,{class:"movie-list-item-info",onClick:a=>D(e.movieId)},{default:t((()=>[u(g,{style:{"font-size":"32rpx",color:"#f39c12"}},{default:t((()=>[r(k(e.nm),1)])),_:2},1024),u(g,{class:"info-item"},{default:t((()=>[r("年份："+k(e.year)+" · "+k(e.typeDesc)+" · "+k(e.area),1)])),_:2},1024),u(g,{class:"info-item"},{default:t((()=>[r("主演："+k(e.actors),1)])),_:2},1024),u(g,{class:"info-item"},{default:t((()=>[r("类型："+k(e.categorys),1)])),_:2},1024),u(g,{class:"info-item"},{default:t((()=>[r("状态："+k(e.ut),1)])),_:2},1024),u(g,{class:"info-item"},{default:t((()=>[r("播放次数："+k(e.play_count),1)])),_:2},1024)])),_:2},1032,["onClick"]),u(g,{class:"score"},{default:t((()=>[r(k(e.score),1)])),_:2},1024)])),_:2},1024)))),256))])),_:1})):(l(),s(g,{key:1,class:"noLogin",size:"mini"},{default:t((()=>[r("历史记录为空")])),_:1})),P.value?(l(),s(g,{key:2,class:"toolbar"},{default:t((()=>[u(g,{class:"select-all",onClick:O},{default:t((()=>[A.value?(l(),s(g,{key:0,class:"check-icon-active"},{default:t((()=>[u(y,{type:"checkmarkempty",color:"#fff"})])),_:1})):(l(),s(g,{key:1,class:"check-icon"})),u(g,{class:"select-all-text"},{default:t((()=>[r("全选")])),_:1})])),_:1}),u(g,{class:"delete",onClick:T},{default:t((()=>[r("删除")])),_:1})])),_:1})):m("",!0)],64)):(l(),s(g,{key:1},{default:t((()=>[r("尚未登录")])),_:1}))])),_:1})])),_:1},8,["style"])}}},[["__scopeId","data-v-b81b6ade"]]);export{z as default};
