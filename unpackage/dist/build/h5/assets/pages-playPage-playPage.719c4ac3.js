import{d as e,m as t,a as l,r as o,o as a,c as i,w as n,h as s,g as u,f as r,j as c,F as d,k as m,e as f,b as p,t as y,l as v,i as _,v as h,x as b,y as g,p as k,M as w,z as S,N as x,B as C,S as z,n as N}from"./index-c10f9bc5.js";import{b as $}from"./u-image.0192172e.js";import{r as B,o as T}from"./uni-app.es.7b888dc1.js";import{_ as j}from"./_plugin-vue_export-helper.1b428a4d.js";import{_ as I}from"./uni-icons.86887c9d.js";import{u as P}from"./member.156f20f2.js";import{C as A}from"./card-list1.370a1e10.js";import{d as D,e as H,f as R,h as E,i as G,c as U,j as F,k as L}from"./data.700934dc.js";const M=j({mixins:[t,l,{props:{text:{type:[Array],default:e.columnNotice.text},icon:{type:String,default:e.columnNotice.icon},mode:{type:String,default:e.columnNotice.mode},color:{type:String,default:e.columnNotice.color},bgColor:{type:String,default:e.columnNotice.bgColor},fontSize:{type:[String,Number],default:e.columnNotice.fontSize},speed:{type:[String,Number],default:e.columnNotice.speed},step:{type:Boolean,default:e.columnNotice.step},duration:{type:[String,Number],default:e.columnNotice.duration},disableTouch:{type:Boolean,default:e.columnNotice.disableTouch}}}],watch:{text:{immediate:!0,handler(e,t){uni.$u.test.array(e)||uni.$u.error("noticebar组件direction为column时，要求text参数为数组形式")}}},computed:{textStyle(){let e={};return e.color=this.color,e.fontSize=uni.$u.addUnit(this.fontSize),e},vertical(){return"horizontal"!=this.mode}},data:()=>({index:0}),methods:{noticeChange(e){this.index=e.detail.current},clickHandler(){this.$emit("click",this.index)},close(){this.$emit("close")}}},[["render",function(e,t,l,g,k,w){const S=B(o("u-icon"),$),x=v,C=_,z=h,N=b;return a(),i(x,{class:"u-notice",onClick:w.clickHandler},{default:n((()=>[s(e.$slots,"icon",{},(()=>[e.icon?(a(),i(x,{key:0,class:"u-notice__left-icon"},{default:n((()=>[u(S,{name:e.icon,color:e.color,size:"19"},null,8,["name","color"])])),_:1})):r("",!0)]),!0),u(N,{"disable-touch":e.disableTouch,vertical:!e.step,circular:"",interval:e.duration,autoplay:!0,class:"u-notice__swiper",onChange:w.noticeChange},{default:n((()=>[(a(!0),c(d,null,m(e.text,((e,t)=>(a(),i(z,{key:t,class:"u-notice__swiper__item"},{default:n((()=>[u(C,{class:"u-notice__swiper__item__text u-line-1",style:f([w.textStyle])},{default:n((()=>[p(y(e),1)])),_:2},1032,["style"])])),_:2},1024)))),128))])),_:1},8,["disable-touch","vertical","interval","onChange"]),["link","closable"].includes(e.mode)?(a(),i(x,{key:0,class:"u-notice__right-icon"},{default:n((()=>["link"===e.mode?(a(),i(S,{key:0,name:"arrow-right",size:17,color:e.color},null,8,["color"])):r("",!0),"closable"===e.mode?(a(),i(S,{key:1,name:"close",size:16,color:e.color,onClick:w.close},null,8,["color","onClick"])):r("",!0)])),_:1})):r("",!0)])),_:3},8,["onClick"])}],["__scopeId","data-v-4c1f2f4b"]]);const q=j({name:"u-row-notice",mixins:[t,l,{props:{text:{type:String,default:e.rowNotice.text},icon:{type:String,default:e.rowNotice.icon},mode:{type:String,default:e.rowNotice.mode},color:{type:String,default:e.rowNotice.color},bgColor:{type:String,default:e.rowNotice.bgColor},fontSize:{type:[String,Number],default:e.rowNotice.fontSize},speed:{type:[String,Number],default:e.rowNotice.speed}}}],data:()=>({animationDuration:"0",animationPlayState:"paused",nvueInit:!0,show:!0}),watch:{text:{immediate:!0,handler(e,t){this.vue(),uni.$u.test.string(e)||uni.$u.error("noticebar组件direction为row时，要求text参数为字符串形式")}},fontSize(){this.vue()},speed(){this.vue()}},computed:{textStyle(){let e={};return e.color=this.color,e.fontSize=uni.$u.addUnit(this.fontSize),e},animationStyle(){let e={};return e.animationDuration=this.animationDuration,e.animationPlayState=this.animationPlayState,e},innerText(){let e=[];const t=this.text.split("");for(let l=0;l<t.length;l+=20)e.push(t.slice(l,l+20).join(""));return e}},mounted(){this.init()},methods:{init(){this.vue(),uni.$u.test.string(this.text)||uni.$u.error("noticebar组件direction为row时，要求text参数为字符串形式")},async vue(){let e=0;await uni.$u.sleep(),e=(await this.$uGetRect(".u-notice__content__text")).width,(await this.$uGetRect(".u-notice__content")).width,this.animationDuration=e/uni.$u.getPx(this.speed)+"s",this.animationPlayState="paused",setTimeout((()=>{this.animationPlayState="running"}),10)},async nvue(){},loopAnimation(e,t){},getNvueRect(e){},clickHandler(e){this.$emit("click")},close(){this.$emit("close")}}},[["render",function(e,t,l,h,b,g){const k=B(o("u-icon"),$),w=v,S=_;return a(),i(w,{class:"u-notice",onClick:g.clickHandler},{default:n((()=>[s(e.$slots,"icon",{},(()=>[e.icon?(a(),i(w,{key:0,class:"u-notice__left-icon"},{default:n((()=>[u(k,{name:e.icon,color:e.color,size:"19"},null,8,["name","color"])])),_:1})):r("",!0)]),!0),u(w,{class:"u-notice__content",ref:"u-notice__content"},{default:n((()=>[u(w,{ref:"u-notice__content__text",class:"u-notice__content__text",style:f([g.animationStyle])},{default:n((()=>[(a(!0),c(d,null,m(g.innerText,((e,t)=>(a(),i(S,{key:t,style:f([g.textStyle])},{default:n((()=>[p(y(e),1)])),_:2},1032,["style"])))),128))])),_:1},8,["style"])])),_:1},512),["link","closable"].includes(e.mode)?(a(),i(w,{key:0,class:"u-notice__right-icon"},{default:n((()=>["link"===e.mode?(a(),i(k,{key:0,name:"arrow-right",size:17,color:e.color},null,8,["color"])):r("",!0),"closable"===e.mode?(a(),i(k,{key:1,onClick:g.close,name:"close",size:16,color:e.color},null,8,["onClick","color"])):r("",!0)])),_:1})):r("",!0)])),_:3},8,["onClick"])}],["__scopeId","data-v-385a1828"]]);const J=j({name:"u-notice-bar",mixins:[t,l,{props:{text:{type:[Array,String],default:e.noticeBar.text},direction:{type:String,default:e.noticeBar.direction},step:{type:Boolean,default:e.noticeBar.step},icon:{type:String,default:e.noticeBar.icon},mode:{type:String,default:e.noticeBar.mode},color:{type:String,default:e.noticeBar.color},bgColor:{type:String,default:e.noticeBar.bgColor},speed:{type:[String,Number],default:e.noticeBar.speed},fontSize:{type:[String,Number],default:e.noticeBar.fontSize},duration:{type:[String,Number],default:e.noticeBar.duration},disableTouch:{type:Boolean,default:e.noticeBar.disableTouch},url:{type:String,default:e.noticeBar.url},linkType:{type:String,default:e.noticeBar.linkType}}}],data:()=>({show:!0}),methods:{click(e){this.$emit("click",e),this.url&&this.linkType&&this.openPage()},close(){this.show=!1,this.$emit("close")}}},[["render",function(e,t,l,s,u,c){const d=B(o("u-column-notice"),M),m=B(o("u-row-notice"),q),p=v;return u.show?(a(),i(p,{key:0,class:"u-notice-bar",style:f([{backgroundColor:e.bgColor},e.$u.addStyle(e.customStyle)])},{default:n((()=>["column"===e.direction||"row"===e.direction&&e.step?(a(),i(d,{key:0,color:e.color,bgColor:e.bgColor,text:e.text,mode:e.mode,step:e.step,icon:e.icon,"disable-touch":e.disableTouch,fontSize:e.fontSize,duration:e.duration,onClose:c.close,onClick:c.click},null,8,["color","bgColor","text","mode","step","icon","disable-touch","fontSize","duration","onClose","onClick"])):(a(),i(m,{key:1,color:e.color,bgColor:e.bgColor,text:e.text,mode:e.mode,fontSize:e.fontSize,speed:e.speed,url:e.url,linkType:e.linkType,icon:e.icon,onClose:c.close,onClick:c.click},null,8,["color","bgColor","text","mode","fontSize","speed","url","linkType","icon","onClose","onClick"]))])),_:1},8,["style"])):r("",!0)}],["__scopeId","data-v-abff91ff"]]),K=j({__name:"playPage",props:{id:String},setup(e){const t=e,{safeAreaInsets:l}=g();T((async()=>{await Y(),await Z(),await ee(),await D(t.id),await le(),s.value=!0,console.log(b.value)}));const s=k(!1),h=k(!0);k(!1);const b=k(0),$=k("视频资源皆由网络采集而来,不要相信任何广告！"),j=k(),M=k([]),q=k(""),K=k(!1),O=P(),Q=k(),V=k(0),W=k([{name:"1号线",url:"https://sljxsl.com/?url="},{name:"2号线",url:"https://www.xinlangjiexi.com/m3u8/?url="},{name:"3号线",url:"https://jiexi.ttbfp1.com/m3u8/?url="},{name:"4号线",url:"https://vip.zykbf.com/?url="},{name:"5号线",url:"https://lziplayer.com/?url="}]),X=k("https://sljxsl.com/?url="),Y=async()=>{const e=await H(t.id);j.value=e,w({title:j.value.nm});j.value.url.split("#").forEach((e=>{const t=e.split("$"),l={number:t[0],url:t[1]};M.value.push(l)})),j.value.url||(h.value=!1)},Z=async()=>{if(O.profile){const e=await R();K.value=e.some((e=>e.movieId===j.value.movieId))}},ee=()=>{O.profile?E().then((e=>{e.forEach((e=>{e.movieId==t.id&&e.oldnumber?(q.value=M.value[e.oldnumber].url,b.value=e.oldnumber):q.value=M.value[0].url,$.value="当前正在播放: "+j.value.nm+M.value[b.value].number}));const l={movieId:t.id,oldnumber:b.value};G(l)})):(q.value=M.value[0].url,$.value="当前正在播放: "+j.value.nm+M.value[b.value].number)},te=()=>{O.profile&&(K.value?F([j.value.movieId]).then((e=>{K.value=!K.value,C({title:"取消收藏"})})):L(j.value.movieId).then((e=>{K.value=!K.value,C({title:"已收藏"})})))},le=async()=>{const e=await U({keywords:j.value.dir,range:1,num:6,page:1});Q.value=e.movieList};return(e,g)=>{var k;const w=v,C=B(o("u-notice-bar"),J),T=B(o("uni-icons"),I),P=_,D=z;return a(),i(w,{class:"playPage",style:f({paddingTop:(null==(k=S(l))?void 0:k.top)+"px"})},{default:n((()=>[u(w,{class:"player"},{default:n((()=>[x("iframe",{src:X.value+q.value,marginwidth:"0",marginheight:"0",border:"0",scrolling:"no",frameborder:"0",topmargin:"0",width:"100%",height:"100%",allowfullscreen:"allowfullscreen",mozallowfullscreen:"mozallowfullscreen",msallowfullscreen:" msallowfullscreen",oallowfullscreen:"oallowfullscreen",webkitallowfullscreen:"webkitallowfullscreen"},"\r\n\t\t\t",8,["src"])])),_:1}),s.value?(a(),i(w,{key:0,class:"wrap"},{default:n((()=>[u(w,{class:"detail"},{default:n((()=>[u(C,{text:$.value},null,8,["text"]),u(w,{class:"detail-info"},{default:n((()=>[u(w,{class:"left"},{default:n((()=>[u(w,{class:"title"},{default:n((()=>[p(y(j.value.nm),1)])),_:1}),u(w,{class:"score"},{default:n((()=>[p(y(j.value.score)+"分",1)])),_:1}),u(w,{class:"info"},{default:n((()=>[p(y(j.value.area)+" "+y(j.value.year)+" "+y(j.value.cat),1)])),_:1})])),_:1}),u(w,{class:"right",onClick:te},{default:n((()=>[K.value?(a(),i(w,{key:0,class:"collect-active"},{default:n((()=>[u(T,{type:"star-filled",size:"32",color:"#f1c40f"})])),_:1})):(a(),i(w,{key:1,class:"collect"},{default:n((()=>[u(T,{type:"star",size:"32"})])),_:1}))])),_:1})])),_:1}),u(w,{class:"introduction"},{default:n((()=>[u(P,null,{default:n((()=>[p(y(j.value.intro),1)])),_:1})])),_:1})])),_:1}),h.value?(a(),i(w,{key:0,class:"number"},{default:n((()=>[u(w,{class:"number-hd"},{default:n((()=>[p("选集")])),_:1}),u(w,{class:"number-bd"},{default:n((()=>[u(D,{"scroll-x":"true",class:"scroll-view"},{default:n((()=>[(a(!0),c(d,null,m(M.value,((e,l)=>(a(),i(w,{class:N(["number-bd-item",b.value==l?"active":""]),onClick:o=>((e,l)=>{if(q.value=e,b.value=l,$.value="当前正在播放: "+j.value.nm+M.value[b.value].number,O.profile){const e={movieId:t.id,oldnumber:b.value};G(e)}})(e.url,l)},{default:n((()=>[p(y(e.number),1)])),_:2},1032,["class","onClick"])))),256))])),_:1})])),_:1})])),_:1})):(a(),i(w,{key:1},{default:n((()=>[p("暂时没有资源")])),_:1})),u(w,{class:"number"},{default:n((()=>[u(w,{class:"number-hd"},{default:n((()=>[p("线路")])),_:1}),u(w,{class:"number-bd"},{default:n((()=>[u(D,{"scroll-x":"true",class:"scroll-view"},{default:n((()=>[(a(!0),c(d,null,m(W.value,((e,t)=>(a(),i(w,{class:N(["number-bd-item",V.value==t?"active":""]),style:{padding:"10rpx 20rpx"},onClick:l=>((e,t)=>{V.value=t,X.value=e})(e.url,t)},{default:n((()=>[p(y(e.name),1)])),_:2},1032,["class","onClick"])))),256))])),_:1})])),_:1})])),_:1}),u(w,{class:"recommend-dir"},{default:n((()=>[u(w,{style:{"font-size":"34rpx","font-weight":"700",margin:"30rpx 0"}},{default:n((()=>[p("导演相关")])),_:1}),Q.value?(a(),i(A,{key:0,list:Q.value},null,8,["list"])):(a(),i(w,{key:1},{default:n((()=>[p("该导演没有其它作品")])),_:1}))])),_:1})])),_:1})):r("",!0)])),_:1},8,["style"])}}},[["__scopeId","data-v-84b3ba76"]]);export{K as default};
