import{y as a,p as e,o as l,c as s,w as t,e as o,z as u,f as r,l as c,g as n,b as i,P as p,Q as d,B as m,O as f,r as v,i as _,L as h,I as y}from"./index-c10f9bc5.js";import{_ as x,b}from"./u-image.0192172e.js";import{o as V,r as w}from"./uni-app.es.7b888dc1.js";import{b as g,u as j}from"./data.700934dc.js";import{u as k}from"./member.156f20f2.js";import{_ as I}from"./_plugin-vue_export-helper.1b428a4d.js";const P=I({__name:"user-profile",setup(I){const P=k(),{safeAreaInsets:U}=a(),z=e();V((async()=>{const a=await g();z.value=a}));const C=a=>{p({count:1,success:a=>{const e=a.tempFilePaths[0];d({url:"https://www.3154movie.cn/upload/avatar",filePath:e,name:"avatar",success:a=>{const e=a.data;z.value.avatar=e},fail:a=>{m({title:"图片过大，上传图片失败"})}})},fail:a=>{console.error("选择图片失败：",a)}})},F=async()=>{P.profile&&(await j(z.value),f({delta:1}))};return(a,e)=>{var p;const d=w(v("u-image"),x),m=w(v("u-icon"),b),f=_,V=c,g=h,j=y;return z.value?(l(),s(V,{key:0,class:"viewport",style:o({paddingTop:(null==(p=u(U))?void 0:p.top)+"px"})},{default:t((()=>[n(V,{class:"avatar"},{default:t((()=>[z.value.avatar?(l(),s(d,{key:0,src:z.value.avatar,mode:"aspectFill",width:"160rpx",height:"160rpx",shape:"circle"},null,8,["src"])):(l(),s(m,{key:1,class:"avatar-icon",name:"account",size:"100rpx",color:"#fff"})),n(f,{class:"text",onClick:C},{default:t((()=>[i("点击修改头像")])),_:1})])),_:1}),n(V,{class:"form"},{default:t((()=>[n(V,{class:"form-content"},{default:t((()=>[n(V,{class:"form-item"},{default:t((()=>[n(f,{class:"label"},{default:t((()=>[i("昵称")])),_:1}),n(g,{class:"input",type:"text",placeholder:"请填写昵称",modelValue:z.value.name,"onUpdate:modelValue":e[0]||(e[0]=a=>z.value.name=a)},null,8,["modelValue"])])),_:1}),n(V,{class:"form-item"},{default:t((()=>[n(f,{class:"label"},{default:t((()=>[i("手机号")])),_:1}),n(g,{class:"input",type:"number",placeholder:"请填写手机号",modelValue:z.value.phone,"onUpdate:modelValue":e[1]||(e[1]=a=>z.value.phone=a)},null,8,["modelValue"])])),_:1}),n(V,{class:"form-item"},{default:t((()=>[n(f,{class:"label"},{default:t((()=>[i("个性签名")])),_:1}),n(g,{class:"input",type:"text",placeholder:"请填写个性签名",modelValue:z.value.introduction,"onUpdate:modelValue":e[2]||(e[2]=a=>z.value.introduction=a)},null,8,["modelValue"])])),_:1})])),_:1}),n(j,{class:"form-button",onClick:F},{default:t((()=>[i("保 存")])),_:1})])),_:1})])),_:1},8,["style"])):r("",!0)}}},[["__scopeId","data-v-9a990d33"]]);export{P as default};
